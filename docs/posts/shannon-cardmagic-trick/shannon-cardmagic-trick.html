<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Himadri Mandal">
<meta name="dcterms.date" content="2023-10-23">

<title>Cold Reflections - Shannon’s Card Magic Trick</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Cold Reflections</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/quirtt" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Shannon’s Card Magic Trick</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">isi</div>
                <div class="quarto-category">statistics</div>
                <div class="quarto-category">math</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Himadri Mandal </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 23, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link active" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#part-a-shannons-algorithm" id="toc-part-a-shannons-algorithm" class="nav-link" data-scroll-target="#part-a-shannons-algorithm">Part A: Shannon’s Algorithm</a></li>
  <li><a href="#part-b-implementation" id="toc-part-b-implementation" class="nav-link" data-scroll-target="#part-b-implementation">Part B: Implementation</a></li>
  <li><a href="#part-c-playing-around" id="toc-part-c-playing-around" class="nav-link" data-scroll-target="#part-c-playing-around">Part C: Playing Around</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>This was my statistics project at ISI Sem 1. My team had: <em>Myself</em>, <em>Siddhartha</em>, <em>Ayan</em>, <em>Drishti</em>, <em>Aman</em>, <em>Mrittika</em>. Thanks to everyone for their efforts.</p>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<hr>
<p><strong>The magician sends you a deck of cards. You riffle shuffle it <em>three</em> times. You pick the card from the top and put it back in the deck, <em>somewhere</em>. You send the deck back to the magician. Can he find the chosen card?</strong></p>
<hr>
<p>What do you think? Well, I guess I wouldn’t have asked this question if this weren’t possible. Yep - it is possible to do it <em>reliably</em> well.</p>
<p>I couldn’t believe it myself. However, I think it will make more sense when I present the algorithm which was (apparently) discovered by Shannon. We will talk about this in part A. And implement it in part B. In the subsequent parts, we investigate what happens if we play with the setup a little bit.</p>
</section>
<section id="part-a-shannons-algorithm" class="level2">
<h2 class="anchored" data-anchor-id="part-a-shannons-algorithm">Part A: Shannon’s Algorithm</h2>
<p>Remember the original orientation of the deck of cards. Label the cards in this orientation <span class="math display">\[
    \{1,2,\cdots,52\}
\]</span></p>
<p>Now, we define <strong><em>rising sequence decomposition.</em></strong> To decompose a deck into its rising sequences we go through the following algorithm</p>
<hr>
<section id="algorithm-risingseq" class="level4">
<h4 class="anchored" data-anchor-id="algorithm-risingseq"><em>Algorithm</em>:</h4>
<ol type="1">
<li><p>Start with 1.</p></li>
<li><p>Find the next number, <strong>If</strong> it is <em>after</em> the previous number, goto <strong>step 2</strong>. <strong>Else</strong>, continue.</p></li>
<li><p>This is a rising sequence. Start with the next unconsidered number, and goto <strong>step 2</strong>.</p></li>
</ol>
<hr>
<p>For example, if the deck is <span class="math inline">\(\{4,3,5,1,2\}\)</span>. we go <span class="math inline">\(1\to 2 \implies (1,2)\)</span>, <span class="math inline">\(3 \implies (3)\)</span>, <span class="math inline">\(4 \to 5 \implies (4,5)\)</span>, thus <span class="math inline">\(\{4,3,5,1,2\} \implies (1,2)(3)(4,5)\)</span>.</p>
<p>Well, it’s time to reveal the secret algorithm that Shannon came up with:</p>
<hr>
</section>
<section id="algorithm" class="level4">
<h4 class="anchored" data-anchor-id="algorithm"><em>Algorithm</em>:</h4>
<p><strong>Perform the rising sequence decomposition of the final deck. There exists a unique rising sequence singleton in this deck - this is the picked card.</strong></p>
<hr>
<p>Our team implemented the algorithm in <strong>R</strong> and the results were extremely satisfactory.</p>
</section>
</section>
<section id="part-b-implementation" class="level2">
<h2 class="anchored" data-anchor-id="part-b-implementation">Part B: Implementation</h2>
<section id="version-1-distribution-fitting" class="level4">
<h4 class="anchored" data-anchor-id="version-1-distribution-fitting">Version 1: Distribution fitting</h4>
<p>We first cut a standard deck 100 times (LOL IN REAL LIFE) and we recorded the number of cards in the smaller deck (Let this vector be <span class="math inline">\(X\)</span>). I was going to fit the Gaussian distribution over the vector <span class="math inline">\(c(X,52-X)\)</span>.</p>
<p>However, I noticed my skill issue when <strong>@Ayan</strong> pointed out that this dataset would not be <strong>IID</strong>. To fix this issue, I tossed a coin 100 times and picked either <span class="math inline">\(x \text{ or } 52-x\)</span> for every <span class="math inline">\(x \in X\)</span>. Fitting the Gaussian distribution over this we ended up with</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">floor</span>(<span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="at">mean=</span><span class="fl">25.78</span>, <span class="at">sd =</span> <span class="fl">2.3046</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Everything else was fairly easy to implement, I had quite some fun while making this. This empirically confirms that the algorithm works with pretty high probabilities <span class="math inline">\(\left(\sim 91\%\right)\)</span>.</p>
<p>Well, I know the code is probably not human-readable (moreso because it was written by me, lol), so, I work with the following functions: <code>RiffleShuffle</code>, <code>Switch</code>, <code>RisingSingleton</code>, <code>Process</code>, and <code>SumCalculator</code>. Here’s what’s special about each of them:</p>
<ul>
<li><p><code>RiffleShuffle(Deck):</code> This first splits the deck according to the fitted distribution. Then, it stores a counter of the number of cards in the Left and Right hands (<code>LeftHand</code>, <code>RightHand</code>). My assumption is: the probability that the “next” card is from the Left hand is <span class="math inline">\(\frac{\texttt{LeftHand}}{\texttt{LeftHand + RightHand}}\)</span> and similarly for the Right hand.</p></li>
<li><p><code>Switch(Deck, c(x, y)):</code> The <span class="math inline">\(x^{\text{th}}\)</span> index card is moved to the <span class="math inline">\(y^{\text{th}}\)</span> index in the deck.</p></li>
<li><p><code>RisingSingleton(Deck):</code> Well, this is interesting. I first create the <code>index</code> array which stores the location of the <span class="math inline">\(i^{\text{th}}\)</span> card in the Deck. Then - note that if there is a RisingSingleton: there is an element <span class="math inline">\(x\)</span> such that <span class="math inline">\(\texttt{index}[x+1] &lt; \texttt{index}[x]\)</span> and <span class="math inline">\(\texttt{index}[x-1] &gt; \texttt{index}[x]\)</span>. The weird condition in the code is to deal with the edgecases, so don’t worry about that. At last, it counts the total number of rising singletons and returns the pair <span class="math inline">\((\texttt{(Sum(RisingSingleton) == 1)}, \texttt{LastSingleton})\)</span>.</p></li>
<li><p><code>Process:</code> This simulates the whole setup, and returns the boolean <span class="math inline">\((\texttt{(Sum(RisingSingleton) == 1) AND (LastSingleton == CorrectCard)})\)</span> which amounts to checking whether we get what we want.</p></li>
<li><p><code>SumCalculator:</code> This function carries out <code>Process</code> 10000 times and finds the percentage of times it gets the card right.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Cards is the permutation _Sigma_.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>Dataset <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">26</span>,<span class="dv">26</span>,<span class="dv">24</span>,<span class="dv">26</span>,<span class="dv">26</span>,<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">26</span>,<span class="dv">25</span>,<span class="dv">23</span>,<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">24</span>,<span class="dv">26</span>,<span class="dv">24</span>,<span class="dv">26</span>,<span class="dv">26</span>,<span class="dv">23</span>,<span class="dv">20</span>,<span class="dv">26</span>,<span class="dv">23</span>,<span class="dv">22</span>,<span class="dv">25</span>,<span class="dv">23</span>,<span class="dv">26</span>,<span class="dv">26</span>,<span class="dv">23</span>,<span class="dv">25</span>,<span class="dv">23</span>,<span class="dv">25</span>,<span class="dv">25</span>,<span class="dv">25</span>,<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">25</span>,<span class="dv">23</span>,<span class="dv">25</span>,<span class="dv">24</span>,<span class="dv">26</span>,<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">23</span>,<span class="dv">26</span>,<span class="dv">23</span>,<span class="dv">26</span>,<span class="dv">24</span>,<span class="dv">26</span>,<span class="dv">24</span>,<span class="dv">25</span>,<span class="dv">24</span>,<span class="dv">25</span>,<span class="dv">23</span>,<span class="dv">24</span>,<span class="dv">25</span>,<span class="dv">22</span>,<span class="dv">21</span>,<span class="dv">25</span>,<span class="dv">25</span>,<span class="dv">25</span>,<span class="dv">21</span>,<span class="dv">23</span>,<span class="dv">24</span>,<span class="dv">23</span>,<span class="dv">21</span>,<span class="dv">26</span>,<span class="dv">25</span>,<span class="dv">25</span>,<span class="dv">24</span>,<span class="dv">24</span>,<span class="dv">25</span>,<span class="dv">24</span>,<span class="dv">25</span>,<span class="dv">24</span>,<span class="dv">24</span>,<span class="dv">23</span>,<span class="dv">25</span>,<span class="dv">21</span>,<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">26</span>,<span class="dv">23</span>,<span class="dv">25</span>,<span class="dv">25</span>,<span class="dv">23</span>,<span class="dv">21</span>,<span class="dv">24</span>,<span class="dv">21</span>,<span class="dv">25</span>,<span class="dv">25</span>,<span class="dv">22</span>,<span class="dv">24</span>,<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">23</span>,<span class="dv">24</span>,<span class="dv">25</span>,<span class="dv">19</span>,<span class="dv">25</span>,<span class="dv">23</span>,<span class="dv">25</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>RiffleShuffle <span class="ot">&lt;-</span> <span class="cf">function</span>(Cards){</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Riffle shuffles the vector of Cards using</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="do">### L/(L+R), R/(L+R) probabilities to each hand. </span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  NewDeck <span class="ot">=</span> <span class="fu">vector</span>()</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  split <span class="ot">=</span> <span class="fu">floor</span>(<span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="at">mean=</span><span class="fl">25.78</span>, <span class="at">sd =</span> <span class="fl">2.3046</span>))</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  LeftHand <span class="ot">=</span> Cards[<span class="dv">1</span><span class="sc">:</span>split]</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  RightHand <span class="ot">=</span> Cards[(split<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span><span class="dv">52</span>]</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">52</span>){</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    L <span class="ot">&lt;-</span> <span class="fu">length</span>(LeftHand)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    R <span class="ot">&lt;-</span> <span class="fu">length</span>(RightHand)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    hand <span class="ot">=</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"L"</span>, <span class="st">"R"</span>), <span class="dv">1</span>, <span class="at">prob=</span><span class="fu">c</span>(L,R))</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(hand <span class="sc">==</span> <span class="st">"L"</span>){</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>      card <span class="ot">=</span> LeftHand[<span class="dv">1</span>]</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>      LeftHand <span class="ot">&lt;-</span> <span class="cf">if</span> (L <span class="sc">!=</span> <span class="dv">1</span>) LeftHand[<span class="dv">2</span><span class="sc">:</span>L] <span class="cf">else</span> <span class="fu">vector</span>()</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>      NewDeck <span class="ot">=</span> <span class="fu">append</span>(NewDeck, card)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>{</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>      card <span class="ot">=</span> RightHand[<span class="dv">1</span>]</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>      RightHand <span class="ot">&lt;-</span> <span class="cf">if</span> (R <span class="sc">!=</span> <span class="dv">1</span>) RightHand[<span class="dv">2</span><span class="sc">:</span>R] <span class="cf">else</span> <span class="fu">vector</span>()</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>      NewDeck <span class="ot">=</span> <span class="fu">append</span>(NewDeck, card)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(NewDeck)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>Switch <span class="ot">&lt;-</span> <span class="cf">function</span>(Cards, vals) {</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1 &lt;= y &lt;= 52</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1 &lt;= x &lt;= 52</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Logic: xth index card is moved at yth index</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">=</span> vals[<span class="dv">1</span>]</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">=</span> vals[<span class="dv">2</span>]</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  NewCards <span class="ot">=</span> <span class="fu">vector</span>()</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Cards)) {</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i <span class="sc">!=</span> x) {</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>      NewCards <span class="ot">=</span> <span class="fu">append</span>(NewCards, Cards[i])</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (y <span class="sc">!=</span> <span class="dv">1</span>) {</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (y <span class="sc">!=</span> <span class="dv">52</span>) {</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>      NewCards <span class="ot">=</span> <span class="fu">append</span>(NewCards, Cards[x], <span class="at">after =</span> y <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>      NewCards <span class="ot">=</span> <span class="fu">append</span>(NewCards, Cards[x])</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    NewCards <span class="ot">=</span> <span class="fu">append</span>(Cards[x], NewCards)</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(NewCards)</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>RisingSingleton <span class="ot">&lt;-</span> <span class="cf">function</span>(array){</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Checks if there is a unique Rising Singleton and returns the singleton.</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>  index <span class="ot">=</span> <span class="fu">numeric</span>(<span class="dv">0</span>)</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">52</span>){</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    index[array[i]] <span class="ot">=</span> i</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>  Sum <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>  SingletonCard <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">52</span>){</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>((index[i] <span class="sc">&gt;=</span> index[<span class="fu">min</span>((i<span class="sc">+</span><span class="dv">1</span>), <span class="dv">52</span>)]) <span class="sc">&amp;</span> (index[i] <span class="sc">&lt;=</span> index[<span class="fu">max</span>((i<span class="dv">-1</span>), <span class="dv">1</span>)])){</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>      Sum <span class="ot">=</span> Sum <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>      SingletonCard <span class="ot">=</span> i</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">c</span>((Sum <span class="sc">==</span> <span class="dv">1</span>), SingletonCard))</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>Process <span class="ot">&lt;-</span> <span class="cf">function</span>(Cards){</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Performs the whole process and outputs whether there</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>  <span class="do">### is a unique Rising Singleton</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>  Cards <span class="ot">=</span> <span class="fu">RiffleShuffle</span>(Cards)</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>  Cards <span class="ot">=</span> <span class="fu">RiffleShuffle</span>(Cards)</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>  Cards <span class="ot">=</span> <span class="fu">RiffleShuffle</span>(Cards)</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>  vals <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fu">rbinom</span>(<span class="dv">1</span>, <span class="dv">52</span>, <span class="fl">0.5</span>))</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>  PickedCard <span class="ot">=</span> Cards[<span class="dv">1</span>]</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>  Cards <span class="ot">=</span> <span class="fu">Switch</span>(Cards, vals)</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>  RSCheck <span class="ot">=</span> <span class="fu">RisingSingleton</span>(Cards)</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>((RSCheck[<span class="dv">1</span>])<span class="sc">&amp;</span>(RSCheck[<span class="dv">2</span>] <span class="sc">==</span> PickedCard))</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>SumCalculator <span class="ot">&lt;-</span> <span class="cf">function</span>(Cards){</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Simulates Process 10000 and counts how many times  </span></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>  <span class="do">### there is a unique Rising Singleton which is also indeed</span></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>  <span class="do">### the picked card.</span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>  Sum <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>){</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>    Sum <span class="ot">=</span> Sum <span class="sc">+</span> <span class="fu">Process</span>(Cards)</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(Sum)</span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>Cards <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">52</span></span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a><span class="fu">SumCalculator</span>(Cards)<span class="sc">/</span><span class="dv">10000</span> <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 91.91</code></pre>
</div>
</div>
<p>Also, <strong>@Siddhartha</strong> implemented this in Python</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> riffle_shuffle(deck):</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    cut_index <span class="op">=</span> <span class="bu">int</span>(np.random.normal(<span class="fl">25.78</span>, <span class="fl">2.3046</span>))</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    cut_index <span class="op">=</span> <span class="bu">max</span>(<span class="dv">1</span>, <span class="bu">min</span>(cut_index, <span class="dv">51</span>))</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    left_hand <span class="op">=</span> deck[:cut_index]</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    right_hand <span class="op">=</span> deck[cut_index:]</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    shuffled_deck <span class="op">=</span> []</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> left_hand <span class="kw">or</span> right_hand:</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(right_hand) <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> np.random.rand() <span class="op">&lt;=</span> <span class="bu">len</span>(right_hand) <span class="op">/</span> (<span class="bu">len</span>(left_hand) <span class="op">+</span> <span class="bu">len</span>(right_hand)):</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>            shuffled_deck.append(right_hand.pop(<span class="dv">0</span>))</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>            shuffled_deck.append(left_hand.pop(<span class="dv">0</span>))</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> shuffled_deck</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> swap_first_card(deck):</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> <span class="bu">int</span>(<span class="bu">list</span>(np.random.binomial(<span class="dv">52</span>, <span class="fl">0.5</span>, <span class="dv">1</span>))[<span class="dv">0</span>])</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> <span class="bu">min</span>(index, <span class="dv">52</span>)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    deck[<span class="dv">0</span>]<span class="op">=</span>deck.pop(<span class="dv">0</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    deck.insert(index,deck[<span class="dv">0</span>])</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rising_singleton(array):</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create an index array to store the positions of values in the input array</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> <span class="dv">52</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Populate the index array with the positions of values in the input array</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">52</span>):</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>        index[array[i] <span class="op">-</span> <span class="dv">1</span>] <span class="op">=</span> i</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    Sum <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    SingletonCard <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if there is a unique Rising Singleton</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">52</span>):</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (index[i] <span class="op">&gt;=</span> index[<span class="bu">min</span>(i <span class="op">+</span> <span class="dv">1</span>, <span class="dv">51</span>)]) <span class="kw">and</span> (index[i] <span class="op">&lt;=</span> index[<span class="bu">max</span>(i <span class="op">-</span> <span class="dv">1</span>, <span class="dv">0</span>)]):</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>            Sum <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>            SingletonCard <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [Sum <span class="op">==</span> <span class="dv">1</span>, SingletonCard]</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>unique_singleton_count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat the process 10,000 times</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10000</span>):</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    deck <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">53</span>))</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>):</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>        deck <span class="op">=</span> riffle_shuffle(deck)</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    swap_first_card(deck)</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    is_unique_singleton,z <span class="op">=</span> rising_singleton(deck)</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> is_unique_singleton:</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>        unique_singleton_count <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Percentage of unique singletons</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Percentage: "</span>, unique_singleton_count<span class="op">/</span><span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Percentage:  92.38</code></pre>
</div>
</div>
<hr>
</section>
<section id="version-2-splitting-using-operatornamebinleft52-frac12right" class="level4">
<h4 class="anchored" data-anchor-id="version-2-splitting-using-operatornamebinleft52-frac12right">Version 2: Splitting using <span class="math inline">\(\operatorname{Bin}\left(52, \frac{1}{2}\right)\)</span></h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Cards is the permutation _Sigma_.</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>RiffleShuffle <span class="ot">&lt;-</span> <span class="cf">function</span>(Cards){</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  split <span class="ot">=</span> <span class="fu">rbinom</span>(<span class="dv">1</span>, <span class="dv">52</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Where I only change how I perform the split. This results in about <span class="math inline">\(\left(89\%\right)\)</span>.</p>
</section>
</section>
<section id="part-c-playing-around" class="level2">
<h2 class="anchored" data-anchor-id="part-c-playing-around">Part C: Playing Around</h2>
<p>We can now tinker with the setup to see what happens when we change things a little bit. Note that we picked the card from the top and put it back <em>somewhere</em>. It makes sense to ask: what happens when we pick it from <em>anywhere</em>? Well, here’s a plot in <strong>R</strong> which showcases what happens when we vary the location of the picked card.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="picked_card_vary.jpg" class="img-fluid figure-img" width="459"></p>
</figure>
</div>
<p>Which makes sense because the way we are choosing the position to put the card into is a function symmetric around 26.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>